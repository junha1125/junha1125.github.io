---
layout: post
title: (위성Segment) argparse/yaml 공부 내용 정리
description: >  
    
---
(위성Segment) argparse/yaml 공부 내용 정리
**[pytorch-semseg](https://github.com/meetshah1995/pytorch-semseg)**코드를 공부하면서 
앞으로 계속 나오게 될 argparse/yaml 에 대해서 공부하고 정리한 내용을 기록해 놓는다.

***
## Referece for argparse
1. http://blog.naver.com/PostView.nhn?blogId=cjh226&logNo=220997049388&parentCategoryNo=&categoryNo=17&viewDate=&isShowPopularPosts=false&from=section  
2. https://greeksharifa.github.io/references/2019/02/12/argparse-usage/  
3. https://brownbears.tistory.com/413  

### 첫번쩨 Reference 공부내용 정리

```python
# 예제코드
from __future__ import print_function
import argparse

def main():
	parser = argparse.ArgumentParser(description='This code is written for practice about argparse')
	parser.add_argument('X', type=float,
			metavar='First_number',
			help='What is the first number?')
	parser.add_argument('Y', type=float,
			metavar='Second_number',
			help='What is the second number?')
	parser.add_argument('--op', type=str, default='add',
			choices=['add','sub','mul','div'],
			help='What operation?')
	args = parser.parse_args()
	
	X = args.X
	Y = args.Y
	op = args.op
	print(calc(X,Y,op))

def calc(x, y, op):
	if op == 'add':
		return x + y
	elif op == 'sub':
		return x - y
	elif op == 'mul':
		return x * y
	elif op == 'div':
		return x / y

if __name__=="__main__":
	main()
```



1. 기초 코드 
   -  argparse.**ArgumentParser**함수를 통해 parser를 생성한다.
   -  parser.**add_argument**를 이용하여 입력받고자 하는 인자의 조건을 설정한다
   - parser.**parse_args** 함수를 통해 인자들을 파싱하여 args에 저장한다. 각 인자는 add_argument의 *type*에 지정된 형식으로 저장된다

2. parser.**add_argument**에 들어갈 수 있는 옵션 
   - type/ default/ choices/ help 등등 
   - 여기서 choices를 사용함으로써 help에서 어떤 옵션이 가능한지 보여준다.
   - metavar는 필수 인자를 입력하지 않았을 때, 그 자리 변수가 무엇인지에 대한 이름이다. 
   -  **nargs='+'**를 사용함으로써, 여러개의 (제한 없음) 변수를 리스트로 받을 수 있다. 
3. parser.**parse_args**()로 정의된 객체 args 사용방법
   - X = args.X // Y = args.Y 
   - op = args.op 에서 처럼 --[]라고 add_argument를 했다면, args.[]라고 사용가능하다.





### 두번쨰 Reference 공부내용 정리

1. 위의 기초 코드 3개 중, **ArgumentParser**와 **add_argument**에 사용가능한 메소드들이 잘 정리되어 있다. 
2. ![image](https://user-images.githubusercontent.com/46951365/81899266-627b5f00-95f5-11ea-9587-08bc6558ec1f.png)





### 세번쨰 Reference 공부내용 정리

- 지금까지 한 것보다 조금 더 심화된 내용이 설명되어 있다. 
- 이 정도는 필요할 때마다 찾아보기로 하자.

***
## Referece for yaml
1. https://itholic.github.io/python-yaml/  
2. https://teeeeeeemo.tistory.com/39  
3. https://junho85.pe.kr/1451  

**기본 사용방법**은 매우 간단하다.

1. 이와 같은 파일이 있다고 치자

   ```python
   # /home/info/yaml
   language: python
   test: pytes
   ```

   

2. 이렇게 py파일에서 쓰면 된다.

   ```python
   import yaml
   
   with open('info.yaml') as f:
       cfg = yaml.load(f)
   
   
   language = conf['language']
   test = cfg['pytest']
   ```

   즉, yaml 모듈의 load함수를 통해서 conf를 dictionary 객체로 만들어 준다.



3. 추가 사용법 

   - 모르겠으면 우선 yaml파일을 가져오고, type과 같은 함수를 이용해서  내가 가지고 있는 yaml.load로 선언한 객체에 대한 분석을 해보자. 

   - 코드 예제

     ```python
     # yaml 파일
     yaml_str = """
     Date: 2017-08-08
     ChampionList:
     - champion_id: 1000
      name: Teemo
      position: top
      skill: ap
     - champion_id: 1001
      name: Vayne
      position: bottom
      skill: ad
     - champion_id: 1002
      name: Ahri
      position: mid
      skill: ap
     """
     
     # .py 파일 내부 코드
     import yaml
     
     cfg = yaml.load(yaml_str)
     for champion in cfg['ChampionList']:
     	print(champion["name"], champion["skill"])
     
     ```

     













